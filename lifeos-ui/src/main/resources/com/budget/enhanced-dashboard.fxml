<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.text.*?>

<ScrollPane xmlns="http://javafx.com/javafx/8.0.171" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.budget.controller.EnhancedDashboardController">
    <content>
        <VBox spacing="20" style="-fx-background-color: #f5f5f5;">
            <padding>
                <Insets top="20" right="20" bottom="20" left="20"/>
            </padding>
            
            <!-- Nag贸wek z akcjami -->
            <HBox alignment="CENTER_LEFT" spacing="20">
                <Label fx:id="dateLabel" style="-fx-font-size: 24px; -fx-font-weight: bold;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button fx:id="refreshButton" text=" Odwie偶" onAction="#refreshDashboard"/>
                <Button fx:id="generateReportButton" text=" Generuj raport" onAction="#generateReport"/>
                <Button fx:id="exportDataButton" text=" Eksportuj dane" onAction="#exportData"/>
            </HBox>
            
            <!-- Szybkie akcje -->
            <TitledPane text="Szybkie akcje" expanded="false">
                <content>
                    <ListView fx:id="quickActionsList" prefHeight="120"/>
                </content>
            </TitledPane>
            
            <!-- Sekcja finansowa -->
            <TitledPane text="Finanse" expanded="true">
                <content>
                    <GridPane hgap="20" vgap="15">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="20"/>
                            <ColumnConstraints percentWidth="20"/>
                            <ColumnConstraints percentWidth="20"/>
                            <ColumnConstraints percentWidth="20"/>
                            <ColumnConstraints percentWidth="20"/>
                        </columnConstraints>
                        
                        <Label text="Saldo cakowite:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                        <Label fx:id="totalBalanceLabel" style="-fx-font-size: 18px; -fx-font-weight: bold;" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                        
                        <Label text="Przychody miesiczne:" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                        <Label fx:id="monthlyIncomeLabel" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #4CAF50;" GridPane.rowIndex="1" GridPane.columnIndex="1"/>
                        
                        <Label text="Wydatki miesiczne:" GridPane.rowIndex="0" GridPane.columnIndex="2"/>
                        <Label fx:id="monthlyExpensesLabel" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #F44336;" GridPane.rowIndex="1" GridPane.columnIndex="2"/>
                        
                        <Label text="Oszczdnoci:" GridPane.rowIndex="0" GridPane.columnIndex="3"/>
                        <Label fx:id="savingsLabel" style="-fx-font-size: 18px; -fx-font-weight: bold;" GridPane.rowIndex="1" GridPane.columnIndex="3"/>
                        
                        <Label text="Stopa oszczdnoci:" GridPane.rowIndex="0" GridPane.columnIndex="4"/>
                        <Label fx:id="savingsRateLabel" style="-fx-font-size: 16px;" GridPane.rowIndex="1" GridPane.columnIndex="4"/>
                    </GridPane>
                </content>
            </TitledPane>
            
            <!-- Sekcja cel贸w -->
            <TitledPane text="Cele" expanded="true">
                <content>
                    <GridPane hgap="20" vgap="15">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="25"/>
                            <ColumnConstraints percentWidth="25"/>
                            <ColumnConstraints percentWidth="25"/>
                            <ColumnConstraints percentWidth="25"/>
                        </columnConstraints>
                        
                        <Label text="Wszystkie cele:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                        <Label fx:id="totalGoalsLabel" style="-fx-font-size: 18px; -fx-font-weight: bold;" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                        
                        <Label text="Zrealizowane:" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                        <Label fx:id="completedGoalsLabel" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #4CAF50;" GridPane.rowIndex="1" GridPane.columnIndex="1"/>
                        
                        <Label text="Postc og贸lny:" GridPane.rowIndex="0" GridPane.columnIndex="2"/>
                        <VBox alignment="CENTER" GridPane.rowIndex="1" GridPane.columnIndex="2">
                            <ProgressBar fx:id="goalProgressBar" prefWidth="120"/>
                            <Label fx:id="goalProgressLabel" style="-fx-font-size: 12px;"/>
                        </VBox>
                        
                        <Label text="Aktywne cele:" GridPane.rowIndex="0" GridPane.columnIndex="3"/>
                        <Label fx:id="activeGoalsLabel" style="-fx-font-size: 18px; -fx-font-weight: bold;" GridPane.rowIndex="1" GridPane.columnIndex="3"/>
                    </GridPane>
                </content>
            </TitledPane>
            
            <!-- Sekcja zada -->
            <TitledPane text="Zadania" expanded="true">
                <content>
                    <GridPane hgap="20" vgap="15">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="25"/>
                            <ColumnConstraints percentWidth="25"/>
                            <ColumnConstraints percentWidth="25"/>
                            <ColumnConstraints percentWidth="25"/>
                        </columnConstraints>
                        
                        <Label text="Wszystkie zadania:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                        <Label fx:id="totalTasksLabel" style="-fx-font-size: 18px; -fx-font-weight: bold;" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                        
                        <Label text="Wykonane dzisiaj:" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                        <Label fx:id="completedTasksTodayLabel" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #4CAF50;" GridPane.rowIndex="1" GridPane.columnIndex="1"/>
                        
                        <Label text="Oczekujce:" GridPane.rowIndex="0" GridPane.columnIndex="2"/>
                        <Label fx:id="pendingTasksLabel" style="-fx-font-size: 18px; -fx-font-weight: bold;" GridPane.rowIndex="1" GridPane.columnIndex="2"/>
                        
                        <Label text="Zalege:" GridPane.rowIndex="0" GridPane.columnIndex="3"/>
                        <Label fx:id="overdueTasksLabel" style="-fx-font-size: 18px; -fx-font-weight: bold;" GridPane.rowIndex="1" GridPane.columnIndex="3"/>
                    </GridPane>
                </content>
            </TitledPane>
            
            <!-- Sekcja nawyk贸w -->
            <TitledPane text="Nawyki" expanded="true">
                <content>
                    <GridPane hgap="20" vgap="15">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="25"/>
                            <ColumnConstraints percentWidth="25"/>
                            <ColumnConstraints percentWidth="25"/>
                            <ColumnConstraints percentWidth="25"/>
                        </columnConstraints>
                        
                        <Label text="Wszystkie nawyki:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                        <Label fx:id="totalHabitsLabel" style="-fx-font-size: 18px; -fx-font-weight: bold;" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                        
                        <Label text="Wykonane dzisiaj:" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                        <Label fx:id="habitsCompletedTodayLabel" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #4CAF50;" GridPane.rowIndex="1" GridPane.columnIndex="1"/>
                        
                        <Label text="rednia realizacja:" GridPane.rowIndex="0" GridPane.columnIndex="2"/>
                        <Label fx:id="habitCompletionRateLabel" style="-fx-font-size: 18px; -fx-font-weight: bold;" GridPane.rowIndex="1" GridPane.columnIndex="2"/>
                        
                        <Label text="Najdu偶sza seria:" GridPane.rowIndex="0" GridPane.columnIndex="3"/>
                        <Label fx:id="longestStreakLabel" style="-fx-font-size: 18px; -fx-font-weight: bold;" GridPane.rowIndex="1" GridPane.columnIndex="3"/>
                    </GridPane>
                </content>
            </TitledPane>
            
            <!-- Wykresy i dane wizualne -->
            <HBox spacing="20">
                <VBox spacing="10" HBox.hgrow="ALWAYS">
                    <Label text="Finanse" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                    <VBox fx:id="financialChartContainer" style="-fx-background-color: white; -fx-border-color: #ccc;" prefHeight="200"/>
                </VBox>
                
                <VBox spacing="10" HBox.hgrow="ALWAYS">
                    <Label text="Cele" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                    <VBox fx:id="goalsChartContainer" style="-fx-background-color: white; -fx-border-color: #ccc;" prefHeight="200"/>
                </VBox>
            </HBox>
            
            <HBox spacing="20">
                <VBox spacing="10" HBox.hgrow="ALWAYS">
                    <Label text="Zadania" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                    <VBox fx:id="tasksChartContainer" style="-fx-background-color: white; -fx-border-color: #ccc;" prefHeight="200"/>
                </VBox>
                
                <VBox spacing="10" HBox.hgrow="ALWAYS">
                    <Label text="Nawyki" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                    <VBox fx:id="habitChartContainer" style="-fx-background-color: white; -fx-border-color: #ccc;" prefHeight="200"/>
                </VBox>
            </HBox>
            
            <!-- Trendy -->
            <TitledPane text="Trendy produktywnoci (ostatnie 7 dni)" expanded="true">
                <content>
                    <LineChart fx:id="trendsChart" prefHeight="250">
                        <xAxis>
                            <CategoryAxis fx:id="trendsXAxis"/>
                        </xAxis>
                        <yAxis>
                            <NumberAxis fx:id="trendsYAxis"/>
                        </yAxis>
                    </LineChart>
                </content>
            </TitledPane>
            
            <!-- Listy dzienne i powiadomienia -->
            <HBox spacing="20">
                <VBox spacing="10" HBox.hgrow="ALWAYS">
                    <Label text="Zadania na dzi" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                    <ListView fx:id="todayTasksList" prefHeight="150"/>
                </VBox>
                
                <VBox spacing="10" HBox.hgrow="ALWAYS">
                    <Label text="Nawyki na dzi" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                    <ListView fx:id="todayHabitsList" prefHeight="150"/>
                </VBox>
                
                <VBox spacing="10" HBox.hgrow="ALWAYS">
                    <Label text="Powiadomienia" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                    <ListView fx:id="notificationsList" prefHeight="150"/>
                </VBox>
            </HBox>
            
            <!-- Szybkie raporty -->
            <TitledPane text="Szybkie raporty" expanded="false">
                <content>
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <ComboBox fx:id="quickReportTypeComboBox" prefWidth="200"/>
                        <Button fx:id="generateQuickReportButton" text="Generuj raport" onAction="#generateReport"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Label fx:id="statusLabel" style="-fx-text-fill: #666;"/>
                    </HBox>
                </content>
            </TitledPane>
        </VBox>
    </content>
</ScrollPane>