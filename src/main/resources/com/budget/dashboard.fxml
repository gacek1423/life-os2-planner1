<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.chart.*?>

<TabPane xmlns="http://javafx.com/javafx/17"
         xmlns:fx="http://javafx.com/fxml/1"
         fx:controller="com.budget.controller.DashboardController"
         stylesheets="@style.css"
         tabClosingPolicy="UNAVAILABLE">

    <Tab text="FINANSE">
        <BorderPane>
            <center>
                <VBox spacing="15" style="-fx-padding: 20;">
                    <HBox spacing="10" alignment="CENTER_LEFT" styleClass="card" style="-fx-padding: 15;">
                        <ComboBox fx:id="typeBox" promptText="Typ" prefWidth="120"/>
                        <TextField fx:id="categoryField" promptText="Kategoria" style="-fx-prompt-text-fill: derive(-fx-text-fill, -50%);"/>
                        <TextField fx:id="amountField" promptText="Kwota (0.00)" prefWidth="100"/>
                        <TextField fx:id="descField" promptText="Opis" HBox.hgrow="ALWAYS"/>
                        <DatePicker fx:id="datePicker" promptText="Data" prefWidth="120" />
                        <Button text="DODAJ" onAction="#handleAddTransaction" styleClass="button-action" prefWidth="100"/>
                    </HBox>

                    <TableView fx:id="transactionTable" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colDate" text="DATA" prefWidth="100"/>
                            <TableColumn fx:id="colCategory" text="KATEGORIA" prefWidth="150"/>
                            <TableColumn fx:id="colDesc" text="OPIS" prefWidth="250"/>
                            <TableColumn fx:id="colAmount" text="KWOTA" prefWidth="120"/>
                            <TableColumn fx:id="colType" text="TYP" prefWidth="100"/>
                        </columns>
                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                        </columnResizePolicy>
                    </TableView>
                </VBox>
            </center>

            <right>
                <VBox styleClass="card" alignment="TOP_CENTER" spacing="15" prefWidth="320">
                    <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>
                    <BorderPane.margin><Insets top="0" right="20" bottom="20" left="0"/></BorderPane.margin>

                    <Label text="STRUKTURA WYDATKÓW" styleClass="card-title"/>
                    <PieChart fx:id="expenseChart" labelsVisible="false" legendSide="BOTTOM" VBox.vgrow="ALWAYS"/>
                </VBox>
            </right>

            <bottom>
                <HBox spacing="20" alignment="CENTER" style="-fx-padding: 0 20 20 20;">
                    <VBox styleClass="card" prefWidth="220" alignment="CENTER_LEFT" style="-fx-padding: 15;">
                        <Label text="SALDO" styleClass="card-title"/>
                        <Label fx:id="balanceLabel" text="0.00" styleClass="card-value"/>
                    </VBox>
                    <VBox styleClass="card" prefWidth="220" alignment="CENTER_LEFT" style="-fx-padding: 15;">
                        <Label text="WPŁYWY" styleClass="card-title"/>
                        <Label fx:id="incomeLabel" text="0.00" styleClass="card-value" style="-fx-text-fill: #4c9a6a;"/>
                    </VBox>
                    <VBox styleClass="card" prefWidth="220" alignment="CENTER_LEFT" style="-fx-padding: 15;">
                        <Label text="WYDATKI" styleClass="card-title"/>
                        <Label fx:id="expenseLabel" text="0.00" styleClass="card-value" style="-fx-text-fill: #8a3c3c;"/>
                    </VBox>
                </HBox>
            </bottom>
        </BorderPane>
    </Tab>

    <Tab text="ZADANIA">
        <BorderPane>
            <center>
                <VBox spacing="15" style="-fx-padding: 20;">
                    <HBox spacing="10" alignment="CENTER_LEFT" styleClass="card" style="-fx-padding: 15;">
                        <TextField fx:id="taskTitleField" promptText="Nowe zadanie..." HBox.hgrow="ALWAYS"/>
                        <ComboBox fx:id="priorityBox" promptText="Priorytet" prefWidth="110"/>
                        <DatePicker fx:id="taskDatePicker" promptText="Termin" prefWidth="120"/>
                        <Button text="DODAJ ZADANIE" onAction="#handleAddTask" styleClass="button-action"/>
                    </HBox>

                    <Label text="LISTA ZADAŃ" styleClass="card-title" style="-fx-padding: 10 0 0 5;"/>

                    <ListView fx:id="taskListView" VBox.vgrow="ALWAYS" style="-fx-background-color: transparent; -fx-padding: 5;"/>
                </VBox>
            </center>
        </BorderPane>
    </Tab>
    <Tab text="CELE">
        <BorderPane>
            <center>
                <VBox spacing="15" style="-fx-padding: 20;">
                    <HBox spacing="10" alignment="CENTER_LEFT" styleClass="card" style="-fx-padding: 15;">
                        <TextField fx:id="goalNameField" promptText="Nazwa celu (np. Wakacje)" HBox.hgrow="ALWAYS"/>
                        <TextField fx:id="goalTargetField" promptText="Cel (kwota)" prefWidth="120"/>
                        <TextField fx:id="goalCurrentField" promptText="Już mam (kwota)" prefWidth="120"/>
                        <DatePicker fx:id="goalDatePicker" promptText="Termin (opcjonalnie)" prefWidth="150"/>
                        <Button text="DODAJ CEL" onAction="#handleAddGoal" styleClass="button-action"/>
                    </HBox>

                    <Label text="MOJE CELE FINANSOWE" styleClass="card-title" style="-fx-padding: 10 0 0 5;"/>

                    <ListView fx:id="goalListView" VBox.vgrow="ALWAYS" style="-fx-background-color: transparent; -fx-padding: 5;"/>
                </VBox>
            </center>
        </BorderPane>
    </Tab>

</TabPane>

</TabPane>